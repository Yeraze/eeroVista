<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>6.0</version>
    <date>2025-10-20T18:00:00Z</date>
    <templates>
        <template>
            <uuid>d1e2v3i4c5e6t7e8m9p0l1a2t3e4d5e6</uuid>
            <template>eeroVista Device Template</template>
            <name>eeroVista Device Template</name>
            <description>Template for monitoring individual eeroVista devices.

This template is automatically linked to hosts created by the
eeroVista Auto-Discovery template.

Items monitored:
- Connection status (online/offline)
- WiFi signal strength (dBm)
- Download bandwidth (Mbps)
- Upload bandwidth (Mbps)

Triggers:
- Device offline alert
- Weak signal warning (-70 dBm)
- Critical signal alert (-80 dBm)

Required macros (set automatically by host prototype):
- {$DEVICE_MAC} - Device MAC address
- {$DEVICE_HOSTNAME} - Device hostname
- {$DEVICE_NICKNAME} - Device nickname
- {$EEROVISTA_SCHEME} - http or https (inherited)
- {$EEROVISTA_PORT} - eeroVista port (inherited)

Documentation: https://github.com/Yeraze/eeroVista</description>
            <groups>
                <group>
                    <name>Templates/Network devices</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>i1d2e3v4c5o6n7n8e9c0t1e2d3i4t5e6</uuid>
                    <name>Device Connection Status</name>
                    <type>HTTP_AGENT</type>
                    <key>device.connected</key>
                    <delay>1m</delay>
                    <history>7d</history>
                    <trends>365d</trends>
                    <value_type>FLOAT</value_type>
                    <description>Connection status for {$DEVICE_HOSTNAME} (1=online, 0=offline)</description>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>device</value>
                        </tag>
                    </tags>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <url>{$EEROVISTA_SCHEME}://{$PARENT_HOST}:{$EEROVISTA_PORT}/api/zabbix/data?item=device.connected[{$DEVICE_MAC}]</url>
                    <triggers>
                        <trigger>
                            <uuid>t1d2e3v4o5f6f7l8i9n0e1t2r3i4g5g6</uuid>
                            <expression>last(/eeroVista Device Template/device.connected)=0</expression>
                            <name>Device {$DEVICE_HOSTNAME} is offline</name>
                            <priority>WARNING</priority>
                            <description>Device {$DEVICE_HOSTNAME} ({$DEVICE_NICKNAME}) has disconnected from the network</description>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>i2d3e4v5s6i7g8n9a0l1s2t3r4e5n6g7</uuid>
                    <name>Device Signal Strength</name>
                    <type>HTTP_AGENT</type>
                    <key>device.signal</key>
                    <delay>2m</delay>
                    <history>7d</history>
                    <trends>365d</trends>
                    <value_type>FLOAT</value_type>
                    <units>dBm</units>
                    <description>WiFi signal strength for {$DEVICE_HOSTNAME} in dBm</description>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>device</value>
                        </tag>
                    </tags>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <url>{$EEROVISTA_SCHEME}://{$PARENT_HOST}:{$EEROVISTA_PORT}/api/zabbix/data?item=device.signal[{$DEVICE_MAC}]</url>
                    <triggers>
                        <trigger>
                            <uuid>t2d3e4v5w6e7a8k9s0i1g2n3a4l5w6a7</uuid>
                            <expression>last(/eeroVista Device Template/device.signal)&lt;{$SIGNAL_WARN}</expression>
                            <name>Device {$DEVICE_HOSTNAME} has weak signal</name>
                            <priority>WARNING</priority>
                            <description>WiFi signal strength for {$DEVICE_HOSTNAME} is below {$SIGNAL_WARN} dBm</description>
                        </trigger>
                        <trigger>
                            <uuid>t3d4e5v6w7e8a9k0s1i2g3n4a5l6c7r8</uuid>
                            <expression>last(/eeroVista Device Template/device.signal)&lt;{$SIGNAL_CRIT}</expression>
                            <name>Device {$DEVICE_HOSTNAME} has critical signal</name>
                            <priority>HIGH</priority>
                            <description>WiFi signal strength for {$DEVICE_HOSTNAME} is critically low (&lt; {$SIGNAL_CRIT} dBm)</description>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>i3d4e5v6b7w8d9o0w1n2l3o4a5d6i7t8</uuid>
                    <name>Device Bandwidth Download</name>
                    <type>HTTP_AGENT</type>
                    <key>device.bandwidth.down</key>
                    <delay>2m</delay>
                    <history>7d</history>
                    <trends>365d</trends>
                    <value_type>FLOAT</value_type>
                    <units>Mbps</units>
                    <description>Current download bandwidth for {$DEVICE_HOSTNAME}</description>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>device</value>
                        </tag>
                    </tags>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <url>{$EEROVISTA_SCHEME}://{$PARENT_HOST}:{$EEROVISTA_PORT}/api/zabbix/data?item=device.bandwidth.down[{$DEVICE_MAC}]</url>
                </item>
                <item>
                    <uuid>i4d5e6v7b8w9u0p1l2o3a4d5i6t7e8m9</uuid>
                    <name>Device Bandwidth Upload</name>
                    <type>HTTP_AGENT</type>
                    <key>device.bandwidth.up</key>
                    <delay>2m</delay>
                    <history>7d</history>
                    <trends>365d</trends>
                    <value_type>FLOAT</value_type>
                    <units>Mbps</units>
                    <description>Current upload bandwidth for {$DEVICE_HOSTNAME}</description>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>device</value>
                        </tag>
                    </tags>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <url>{$EEROVISTA_SCHEME}://{$PARENT_HOST}:{$EEROVISTA_PORT}/api/zabbix/data?item=device.bandwidth.up[{$DEVICE_MAC}]</url>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$PARENT_HOST}</macro>
                    <value>{HOST.HOST}</value>
                    <description>Parent eeroVista host (auto-populated)</description>
                </macro>
                <macro>
                    <macro>{$SIGNAL_WARN}</macro>
                    <value>-70</value>
                    <description>WiFi signal strength warning threshold in dBm</description>
                </macro>
                <macro>
                    <macro>{$SIGNAL_CRIT}</macro>
                    <value>-80</value>
                    <description>WiFi signal strength critical threshold in dBm</description>
                </macro>
            </macros>
        </template>
    </templates>
</zabbix_export>
