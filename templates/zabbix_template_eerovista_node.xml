<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>6.0</version>
    <date>2025-10-20T18:00:00Z</date>
    <templates>
        <template>
            <uuid>d1a2d3e4d5e64a7b89a0d1e2d3a4d5e6</uuid>
            <template>eeroVista Node Template</template>
            <name>eeroVista Node Template</name>
            <description>Template for monitoring individual eeroVista mesh nodes.

This template is automatically linked to hosts created by the
eeroVista Auto-Discovery template.

Items monitored:
- Node status (online/offline)
- Connected devices count
- Mesh quality (1-5 bars)

Triggers:
- Node offline alert (HIGH priority)
- Poor mesh quality warning (&lt;3 bars)

Required macros (set automatically by host prototype):
- {$NODE_ID} - Eero node ID
- {$NODE_NAME} - Node location name
- {$NODE_MODEL} - Node hardware model
- {$EEROVISTA_SCHEME} - http or https (inherited)
- {$EEROVISTA_PORT} - eeroVista port (inherited)

Documentation: https://github.com/Yeraze/eeroVista</description>
            <groups>
                <group>
                    <name>Templates/Network devices</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>a1d2a3d4e5c64d7a89b0c1a2d3e4a5d6</uuid>
                    <name>Node Status</name>
                    <type>HTTP_AGENT</type>
                    <key>node.status</key>
                    <delay>2m</delay>
                    <history>7d</history>
                    <trends>365d</trends>
                    <value_type>FLOAT</value_type>
                    <description>Status for Eero node {$NODE_NAME} (1=online, 0=offline)</description>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>node</value>
                        </tag>
                    </tags>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <url>{$EEROVISTA_SCHEME}://{$PARENT_HOST}:{$EEROVISTA_PORT}/api/zabbix/data?item=node.status[{$NODE_ID}]</url>
                    <triggers>
                        <trigger>
                            <uuid>d1d2a3d4e5a64f7f89a0d1e2d3e4a5e6</uuid>
                            <expression>last(/eeroVista Node Template/node.status)=0</expression>
                            <name>Eero node {$NODE_NAME} is offline</name>
                            <priority>HIGH</priority>
                            <description>Eero mesh node {$NODE_NAME} ({$NODE_MODEL}) has gone offline</description>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>a2d3a4d5e6d74e8b9a0c1e2c3a4d5e6a7</uuid>
                    <name>Node Connected Devices</name>
                    <type>HTTP_AGENT</type>
                    <key>node.devices</key>
                    <delay>2m</delay>
                    <history>7d</history>
                    <trends>365d</trends>
                    <value_type>FLOAT</value_type>
                    <description>Number of devices connected to node {$NODE_NAME}</description>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>node</value>
                        </tag>
                    </tags>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <url>{$EEROVISTA_SCHEME}://{$PARENT_HOST}:{$EEROVISTA_PORT}/api/zabbix/data?item=node.devices[{$NODE_ID}]</url>
                </item>
                <item>
                    <uuid>a3d4a5d6e7a84e9c8b1c2d3a4c5a6d7b8</uuid>
                    <name>Node Mesh Quality</name>
                    <type>HTTP_AGENT</type>
                    <key>node.mesh_quality</key>
                    <delay>5m</delay>
                    <history>7d</history>
                    <trends>365d</trends>
                    <value_type>FLOAT</value_type>
                    <description>Mesh quality for node {$NODE_NAME} (1-5 bars)</description>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>node</value>
                        </tag>
                    </tags>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.value</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <url>{$EEROVISTA_SCHEME}://{$PARENT_HOST}:{$EEROVISTA_PORT}/api/zabbix/data?item=node.mesh_quality[{$NODE_ID}]</url>
                    <triggers>
                        <trigger>
                            <uuid>d2d3a4d5e6b74a8a90a1e2c3b4c5d6a7</uuid>
                            <expression>last(/eeroVista Node Template/node.mesh_quality)&lt;3</expression>
                            <name>Eero node {$NODE_NAME} has poor mesh quality</name>
                            <priority>WARNING</priority>
                            <description>Mesh quality for node {$NODE_NAME} is below 3 bars</description>
                        </trigger>
                    </triggers>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$PARENT_HOST}</macro>
                    <value>{HOST.HOST}</value>
                    <description>Parent eeroVista host (auto-populated)</description>
                </macro>
            </macros>
        </template>
    </templates>
</zabbix_export>
